Task description:

1) do Chapter 7,

  - implement the app
  - important: use the latest dependencies (versions)

2) answer the questions

  1.  Назвать варианты версионирования эндпоинтов.
  2.  2 high level основные стратегии версионирования кода и модулей приложения
  3.  (Опционально) Дополнить варианты версионирования эндпоинтов мнением про их сильные и слабые стороны, какой более предпочтительный в той или иной ситуации.
  4.  В коде мы задали контроллеру имя "pollControllerV1", какое имя по умолчанию и для чего мы задали своё. 
  5.  Предположим мы разработали 4 версии нашего Restful API, как будет выглядеть URL для swagger rest api приложения версии 3? 
  6.  Тип объекта, который мы создаем для добавление новой версии API в Swagger и название метода для указания версии.
  7.  4 стратегии пегинации (pagination)
  8.  Основные спринговые типы и их назначения которые вы использовали для функциональности пагинации и сортировки, включая настройку размера страницы по умолчанию.
  9.  (Опционально) Предположим есть реестр инстансов restful микросервисов, в котором каждый инстанс регестрирует (анонсирует) свое появление (запуск) и завершение работы. До 100 000 инстансов всего. Обновление каждые 5 сек. Какую стратегию пегинации будете использовать и почему?

3) Create MR and send the link.

-----
-----

Quiz answers:

1. Варианты версионирования эндпоинтов:

    - по URI,
    - по параметру URI,
    - по заголовку (Accept или кастомному).

2. Основные стратегии версионирования:
    - полное разделение версий, когда каждая версия содержит весь набор поддерживаемых модулей и хранится параллельно предыдущим,
    - частичное разделение, когда каждая версия хранит отдельный только отличающиеся модули, при этом остальные модули используются всеми версиями параллельно.

3. Версионирование по URI позволяет явно определить используемую версию в запросе, что облегчает разработку и тестирование API а также простое переключения пользователя между версиями. При этом заставляет всегда указывать версию, вследствие чего пользователю сложнее перейти на последнюю версию, если он не знает ее идентификатора.
   Версионирование по параметру URI позволяет не указывать версию (как правило в этом случае будет использована последняя). Из минусов - некоторые слои могут не уметь работать с нужным параметром или кешировать его, что может вызвать ошибки и избыточный трафик.
   Версионирование по заголовку также позволяет не указывать версию. При этом сложнее разрабатывать и тестировать API, однако можно управлять версиями отдельных ресурсов не затрагивая весь API.

4. По умолчанию используется имя класса. Для уникальности имен компонентов разных версий используется соглашение, согласно которому компоненту присваивается имя класса + версия.

5. Для открытия swagger rest api приложения версии 3 используется URL "http://localhost:8080/swagger-ui.html?urls.primaryName=v3".

6. Для добавления новой версии API в Swagger добавляется отдельный бин класса Docket. Для указания версии используется метод groupName.

7. Стратегии пегинации:
    - по номеру страницы.
    - по стартовой точке и лимиту.
    - по метке (курсору),
    - по времени.

8. PagingAndSortingRepository - наследование этого класса позволяет получать сортируемые списки и списки с пегинацией.
   HandlerMethodArgumentResolver - интерфейс для передачи Spring'у аргументов метода для использования в контексте.
   PageableHandlerMethodArgumentResolver - класс, реализующий интерфейс HandlerMethodArgumentResolver касательно параметров пагинации и сортировки.
   WebMvcConfigurer - интерфейс для удобной кастомизации деталей приложения (в нашем случае параметров пагинации) без необходимости прописывать все методы кастомизации.
   PageRequest - реализация интерфейса Pageable.
   Docket - тип, позволяющий конфигурировать Swagger при использовании нескольких версий.

9. В случае динамически изменяемого списка инстансов наиболее эффективной будет стратегия пегинации по времени.